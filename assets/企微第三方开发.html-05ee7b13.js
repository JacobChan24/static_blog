import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as s,c as l,a as e,b as t,d as r,f as a}from"./app-9e438faa.js";const _={},c=e("p",null,"理解第三方应用开发的流程与概念",-1),d=e("p",null,"最后更新：2022/06/10",-1),h=e("p",null,[t("总结： 创建应用时获取应用标识和密钥suite_id和suite_secret，搭配企微定时发送的suite_ticket，换取第三方应用凭证suite_access_token，企微管理员授权关联安装这个应用的时候会生成一个临时授权码auth_code，第三方应用通过管理员授权时临时生成的auth_code和之前的suite_access_token就可以换取企业永久授权码permanent_code，这个码是企业授权第三方应用的唯一凭证，第三方应"),e("mark",{style:{background:"#FF5582A6"}},"用在调用企业业务的接口的时候，需要通过接口用"),t("permanent_code换取access_token，所有接口的调用都依赖于有效的access_token。")],-1),u={id:"应用接入流程",tabindex:"-1"},p=e("a",{class:"header-anchor",href:"#应用接入流程","aria-hidden":"true"},"#",-1),E={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E5%BA%94%E7%94%A8%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"},f=e("p",null,"从第三方应用整个项目周期的接入流程来看，主要分成两个阶段：",-1),k={id:"一、应用开发阶段",tabindex:"-1"},g=e("a",{class:"header-anchor",href:"#一、应用开发阶段","aria-hidden":"true"},"#",-1),w={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E4%B8%80%E3%80%81%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5",target:"_blank",rel:"noopener noreferrer"},b=e("ol",null,[e("li",null,"创建应用，配置基本信息"),e("li",null,"开发应用，测试应用逻辑"),e("li",null,"上线应用，提交审核信息")],-1),m={id:"二、应用推广阶段",tabindex:"-1"},q=e("a",{class:"header-anchor",href:"#二、应用推广阶段","aria-hidden":"true"},"#",-1),B={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E4%BA%8C%E3%80%81%E5%BA%94%E7%94%A8%E6%8E%A8%E5%B9%BF%E9%98%B6%E6%AE%B5",target:"_blank",rel:"noopener noreferrer"},x=e("ol",null,[e("li",null,"服务商自有渠道推广"),e("li",null,"企业微信应用市场推广")],-1),A=e("p",null,"作为第三方应用的开发人员，主要的精力会聚焦应用的开发阶段，即从应用的创建、开发测试，再到应用的上线的这个流程。",-1),v=e("p",null,"为了帮助开发者对第三方应用开发的基本模式有一个清晰的理解，本教程将从开发人员开发应用的实际开发过程来讲解这个流程，并且结合每个阶段的工作，来引出当前这个阶段所需要和必须理解的基本概念，尽可能减少理解的成本。",-1),M={id:"基本流程",tabindex:"-1"},D=e("a",{class:"header-anchor",href:"#基本流程","aria-hidden":"true"},"#",-1),z={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"},C=e("p",null,"第三方应用开发的核心模式大致分为四阶段：",-1),F={id:"一、前期应用准备",tabindex:"-1"},T=e("a",{class:"header-anchor",href:"#一、前期应用准备","aria-hidden":"true"},"#",-1),I={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E4%B8%80%E3%80%81%E5%89%8D%E6%9C%9F%E5%BA%94%E7%94%A8%E5%87%86%E5%A4%87",target:"_blank",rel:"noopener noreferrer"},O=e("p",null,[e("strong",null,"创建应用"),e("br"),t(" 填写应用的名称、描述、图标等基本信息；选择应用需要使用的基本权限，比如通讯录权限、组织架构权限和企业客户权限等；填写应用主页、可信域名、回调服务等开发信息。")],-1),Y=e("p",null,[e("strong",null,"获取 suite_id 与 suite_scret"),e("br"),t(" 应用创建成功后，在应用详情页的基本信息，可以查看该应用的唯一身份标识 suite_id 和 对应的调用身份密钥 suite_secret 等，这些是用于后续应用授权等操作的重要参数，须妥善保管。")],-1),y={href:"https://developer.work.weixin.qq.com/tutorial/detail/37",target:"_blank",rel:"noopener noreferrer"},Q=e("figure",null,[e("img",{src:"https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MTQxODI4MzY5Mw_7218_PyOFWaElxJKv8Rwc_1653036168?w=1280&h=354.24864864864867",alt:"image",tabindex:"0",loading:"lazy"}),e("figcaption",null,"image")],-1),N={id:"二、基础环境搭建",tabindex:"-1"},V=e("a",{class:"header-anchor",href:"#二、基础环境搭建","aria-hidden":"true"},"#",-1),L={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E4%BA%8C%E3%80%81%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA",target:"_blank",rel:"noopener noreferrer"},P=e("strong",null,"获取第三方应用凭证",-1),S=e("br",null,null,-1),j={href:"https://developer.work.weixin.qq.com/document/path/90600",target:"_blank",rel:"noopener noreferrer"},J=e("p",null,[e("strong",null,"suite_access_token 在应用授权阶段非常重要，用于获取第 三方应用的预授权码，获取授权企业信息等。")],-1),K={href:"https://developer.work.weixin.qq.com/tutorial/detail/38",target:"_blank",rel:"noopener noreferrer"},W={href:"https://developer.work.weixin.qq.com/tutorial/detail/39",target:"_blank",rel:"noopener noreferrer"},H=e("figure",null,[e("img",{src:"https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MTQxODI4MzY5Mw_620654_MSvH6NtP9YAUTyKw_1653036175?w=1280&h=314.20098846787477",alt:"image",tabindex:"0",loading:"lazy"}),e("figcaption",null,"image")],-1),R={id:"三、企业授权安装",tabindex:"-1"},U=e("a",{class:"header-anchor",href:"#三、企业授权安装","aria-hidden":"true"},"#",-1),G={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E4%B8%89%E3%80%81%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"},X=e("strong",null,"获取临时授权码",-1),Z=e("br",null,null,-1),$={href:"https://developer.work.weixin.qq.com/document/path/90597",target:"_blank",rel:"noopener noreferrer"},ee={href:"https://developer.work.weixin.qq.com/tutorial/detail/40",target:"_blank",rel:"noopener noreferrer"},te=e("strong",null,"获取永久授权码",-1),oe=e("br",null,null,-1),re={href:"https://developer.work.weixin.qq.com/document/path/90603",target:"_blank",rel:"noopener noreferrer"},ne=e("p",null,"permanent_code 是记录企业授权第三方应用的唯一凭证，该授权码永久有效，须妥善保管。",-1),ie={href:"https://developer.work.weixin.qq.com/tutorial/detail/40",target:"_blank",rel:"noopener noreferrer"},se=e("figure",null,[e("img",{src:"https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MTQxODI4MzY5Mw_943126_pcpsF3ki5_1vJwqW_1653036185?w=1280&h=282.7553444180523",alt:"image",tabindex:"0",loading:"lazy"}),e("figcaption",null,"image")],-1),le={id:"四、调用企业接口",tabindex:"-1"},ae=e("a",{class:"header-anchor",href:"#四、调用企业接口","aria-hidden":"true"},"#",-1),_e={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E5%9B%9B%E3%80%81%E8%B0%83%E7%94%A8%E4%BC%81%E4%B8%9A%E6%8E%A5%E5%8F%A3",target:"_blank",rel:"noopener noreferrer"},ce=e("strong",null,"获取登录用户身份",-1),de=e("br",null,null,-1),he={href:"https://developer.work.weixin.qq.com/document/path/91120",target:"_blank",rel:"noopener noreferrer"},ue={href:"https://developer.work.weixin.qq.com/document/path/91121",target:"_blank",rel:"noopener noreferrer"},pe={href:"https://developer.work.weixin.qq.com/tutorial/detail/41",target:"_blank",rel:"noopener noreferrer"},Ee=e("strong",null,"获取企业凭证",-1),fe=e("br",null,null,-1),ke={href:"https://developer.work.weixin.qq.com/document/path/90605",target:"_blank",rel:"noopener noreferrer"},ge=e("p",null,[t("access_token 是用于操作授权企业相关接口的统一凭证，所有的企业数据接口都依赖这个凭证，须妥善保管。安全起见 access_token 有一定的有效期，第三方应用服务在使用前，须确保当前 access_token 有效。"),e("br"),t(" 调用企业接口"),e("br"),t(" 在获得 access_token 后，可以结合企业内的业务逻辑，进行通讯录管理、消息推送、审批单据等能力接口的调用。")],-1),we={href:"https://developer.work.weixin.qq.com/tutorial/detail/42",target:"_blank",rel:"noopener noreferrer"},be={href:"https://developer.work.weixin.qq.com/tutorial/detail/43",target:"_blank",rel:"noopener noreferrer"},me=e("figure",null,[e("img",{src:"https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MTQxODI4MzY5Mw_965714_9w7QvuSbn9_LPMVD_1653036194?w=1280&h=299.4344473007712",alt:"image",tabindex:"0",loading:"lazy"}),e("figcaption",null,"image")],-1),qe=e("p",null,"所以，企业微信第三方应用开发的基本流程大致如图所示，在这个简化的流程中，目前仅需要关注几个核心的概念即可。",-1),Be=e("figure",null,[e("img",{src:"https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MTQxODI4MzY5Mw_890670_rrDIj-bl0Te8B8tj_1653384175?w=1280&h=693.156146179402",alt:"image",tabindex:"0",loading:"lazy"}),e("figcaption",null,"image")],-1),xe={id:"基本概念",tabindex:"-1"},Ae=e("a",{class:"header-anchor",href:"#基本概念","aria-hidden":"true"},"#",-1),ve={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5",target:"_blank",rel:"noopener noreferrer"},Me=e("p",null,"虽然与第三方应用相关的概念较多，本教程中仅列举出开发第三方应用过程最常见也最必须的一些概念：",-1),De={id:"第三方应用相关",tabindex:"-1"},ze=e("a",{class:"header-anchor",href:"#第三方应用相关","aria-hidden":"true"},"#",-1),Ce={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8%E7%9B%B8%E5%85%B3",target:"_blank",rel:"noopener noreferrer"},Fe=a("<ul><li><p>suite_id<br> 第三方应用 ID，是每一个第三方应用的唯一身份标识。</p></li><li><p>suite_secret<br> 第三方应用密钥，是第三方应用对应的调用身份密钥，与 suite_id 配套使用。</p></li><li><p>suite_ticket<br> 第三方应用票据，与 suite_id、suite_secret 配套使用，用于获取suite_access_token。</p></li><li><p>suite_access_token<br> 第三方应用凭证，是通过 suite_id、suite_secret 、suite_ticket 换取而来的，代表第三方应用的身份的凭证，用于获取第三方应用的预授权码，获取授权企业信息等。</p></li></ul>",1),Te={id:"企业授权相关",tabindex:"-1"},Ie=e("a",{class:"header-anchor",href:"#企业授权相关","aria-hidden":"true"},"#",-1),Oe={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E4%BC%81%E4%B8%9A%E6%8E%88%E6%9D%83%E7%9B%B8%E5%85%B3",target:"_blank",rel:"noopener noreferrer"},Ye=e("ul",null,[e("li",null,[e("p",null,[t("pre_auth_code"),e("br"),t(" 预授权码，是用于企业授权时的第三方服务商安全验证。预授权码仅用于企业从服务商网站链接授权安装的场景，企业进行授权后，第三方应用后台将收到临时授权码。")])]),e("li",null,[e("p",null,[t("auth_code"),e("br"),t(" 临时授权码，是企业对第三方应用进行授权时，第三方应用服务收到的一个临时授权的标记，收到临时授权码之后应该尽快换取成永久授权码 permanent_code。")])]),e("li",null,[e("p",null,[t("permanent_code"),e("br"),t(" 企业永久授权码，是记录企业授权第三方应用的唯一凭证，该授权码永久有效。通过 auth_code 和 suite_access_token 换取得到。")])])],-1),ye={id:"企业相关",tabindex:"-1"},Qe=e("a",{class:"header-anchor",href:"#企业相关","aria-hidden":"true"},"#",-1),Ne={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E4%BC%81%E4%B8%9A%E7%9B%B8%E5%85%B3",target:"_blank",rel:"noopener noreferrer"},Ve=e("ul",null,[e("li",null,[e("p",null,[t("corp_id"),e("br"),t(" 企业ID，每个企业都拥有唯一的企业身份标记。")])]),e("li",null,[e("p",null,[t("access_token"),e("br"),t(" 企业凭证，access_token是企业后台去企业微信的后台获取信息时的重要票据，由corpid和secret产生。所有接口在通信时都需要携带此信息用于验证接口的访问权限。")])])],-1),Le={id:"成员相关",tabindex:"-1"},Pe=e("a",{class:"header-anchor",href:"#成员相关","aria-hidden":"true"},"#",-1),Se={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E6%88%90%E5%91%98%E7%9B%B8%E5%85%B3",target:"_blank",rel:"noopener noreferrer"},je=e("ul",null,[e("li",null,[t("user_id"),e("br"),t(" 员工ID，企业员工在企业内的唯一身份标记。")])],-1),Je={id:"结语",tabindex:"-1"},Ke=e("a",{class:"header-anchor",href:"#结语","aria-hidden":"true"},"#",-1),We={href:"https://developer.work.weixin.qq.com/tutorial/detail/36#%E7%BB%93%E8%AF%AD",target:"_blank",rel:"noopener noreferrer"},He=e("p",null,"在本节教程中，我们了解了企业微信第三方应用的开发流程和基本的概念。在下一节教程，我们将开始真正的实操，创建一个第三方应用，并且配置基本信息，为开发第一个应用做准备。",-1);function Re(Ue,Ge){const o=i("ExternalLinkIcon");return s(),l("div",null,[c,d,h,e("h2",u,[p,t(),e("a",E,[r(o)]),t("应用接入流程")]),f,e("h3",k,[g,t(),e("a",w,[r(o)]),t("一、应用开发阶段")]),b,e("h3",m,[q,t(),e("a",B,[r(o)]),t("二、应用推广阶段")]),x,A,v,e("h2",M,[D,t(),e("a",z,[r(o)]),t("基本流程")]),C,e("h3",F,[T,t(),e("a",I,[r(o)]),t("一、前期应用准备")]),O,Y,e("p",null,[t("请参考开发教程 "),e("a",y,[t("一：如何创建第三方应用"),r(o)])]),Q,e("h3",N,[V,t(),e("a",L,[r(o)]),t("二、基础环境搭建")]),e("p",null,[P,S,t(" 企业微信服务会向第三方应用服务器定时推送该第三方应用的 `suite_ticket，在成功接收到 suite_ticket 后，连同应用创建时得到的 suite_id , suite_secret 作为参数，调用 "),e("a",j,[t("获取第三方应用凭证接口"),r(o)]),t(" 得到第三方应用凭证 suite_access_token。")]),J,e("p",null,[t("请参考开发教程 "),e("a",K,[t("二：如何接收企业微信回调"),r(o)]),t("与 "),e("a",W,[t("三：获取第三方应用凭证"),r(o)]),t("。")]),H,e("h3",R,[U,t(),e("a",G,[r(o)]),t("三、企业授权安装")]),e("p",null,[X,Z,t(" 企业管理员通过服务商官网的授权链接，或企业微信官方应用市场，"),e("a",$,[t("授权安装第三方应用"),r(o)]),t(" 时，将得到该企业对应于该第三方应用的 临时授权码 auth_code。")]),e("p",null,[t("请参考开发教程 "),e("a",ee,[t("四：如何将应用安装到企业工作台"),r(o)])]),e("p",null,[te,oe,t(" 第三方应用服务后台通过使用 auth_code 与上一步得到的 suite_access_token 作为参数， 调用 "),e("a",re,[t("获取永久授权码"),r(o)]),t(" 接口，便能够获得企业永久授权码 permanent_code。")]),ne,e("p",null,[t("请参考开发教程 "),e("a",ie,[t("四：如何将应用安装到企业工作台"),r(o)])]),se,e("h3",le,[ae,t(),e("a",_e,[r(o)]),t("四、调用企业接口")]),e("p",null,[ce,de,t(" 企业授权安装第三方应用后，企业员工可通过企业微信工作台打开该应用。在打开应用页面时使用 "),e("a",he,[t("网页授权链接"),r(o)]),t(" 的重定向，得到一个可以换取当前访问用户身份的 code。通过 code 与 suite_access_token 调用 "),e("a",ue,[t("获取访问用户身份"),r(o)]),t(" 接口即可得到当前访问用户的 user_id 等基本信息。")]),e("p",null,[t("请参考开发教程 "),e("a",pe,[t("五：如何获取登录用户信息"),r(o)])]),e("p",null,[Ee,fe,t(" 第三方应用服务在调用企业业务接口前，比如通讯录管理、向成员推送应用消息等企业业务场景，需要先通过 "),e("a",ke,[t("获取企业凭证"),r(o)]),t(" 接口将 permanent_code 换取成企业凭证 access_token。")]),ge,e("p",null,[t("请参考开发教程 "),e("a",we,[t("六：如何向成员发送消息"),r(o)]),t(" 与 "),e("a",be,[t("七：如何提交上线第三方应用"),r(o)])]),me,qe,Be,e("h2",xe,[Ae,t(),e("a",ve,[r(o)]),t("基本概念")]),Me,e("h3",De,[ze,t(),e("a",Ce,[r(o)]),t("第三方应用相关")]),Fe,e("h3",Te,[Ie,t(),e("a",Oe,[r(o)]),t("企业授权相关")]),Ye,e("h3",ye,[Qe,t(),e("a",Ne,[r(o)]),t("企业相关")]),Ve,e("h3",Le,[Pe,t(),e("a",Se,[r(o)]),t("成员相关")]),je,e("h2",Je,[Ke,t(),e("a",We,[r(o)]),t("结语")]),He])}const $e=n(_,[["render",Re],["__file","企微第三方开发.html.vue"]]);export{$e as default};
